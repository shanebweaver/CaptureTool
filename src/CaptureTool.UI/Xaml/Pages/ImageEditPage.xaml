<?xml version="1.0" encoding="utf-8" ?>
<local:ImageEditPageBase
    x:Class="CaptureTool.UI.Xaml.Pages.ImageEditPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:canvasui="using:Microsoft.Graphics.Canvas.UI.Xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:imagecanvas="using:CaptureTool.UI.Xaml.Controls.ImageCanvas"
    xmlns:local="using:CaptureTool.UI.Xaml.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="using:CaptureTool.ViewModels"
    xmlns:views="using:CaptureTool.UI.Xaml.Views"
    d:DataContext="{d:DesignInstance Type=viewmodels:ImageEditPageViewModel}"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <CommandBar DefaultLabelPosition="Right" IsOpen="False">
            <AppBarToggleButton
                Command="{x:Bind ViewModel.ToggleCropModeCommand}"
                Icon="Crop"
                IsChecked="{x:Bind ViewModel.IsInCropMode, Mode=OneWay}"
                Label="Crop" />
            <AppBarButton
                Command="{x:Bind ViewModel.RotateCommand}"
                Icon="Rotate"
                Label="Rotate" />
            <AppBarButton Command="{x:Bind ViewModel.FlipHorizontalCommand}" Label="Flip X">
                <AppBarButton.Icon>
                    <FontIcon
                        FontFamily="{StaticResource FluentSystemIcons}"
                        FontSize="32"
                        Glyph="{StaticResource FlipHorizontal32Regular}" />
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton Command="{x:Bind ViewModel.FlipVerticalCommand}" Label="Flip Y">
                <AppBarButton.Icon>
                    <FontIcon
                        FontFamily="{StaticResource FluentSystemIcons}"
                        FontSize="32"
                        Glyph="{StaticResource FlipVertical32Regular}" />
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarSeparator />
            <AppBarButton
                Command="{x:Bind ViewModel.UndoCommand}"
                Icon="Undo"
                IsEnabled="False"
                Label="Undo"
                Visibility="Collapsed" />
            <AppBarButton
                Command="{x:Bind ViewModel.RedoCommand}"
                Icon="Redo"
                IsEnabled="False"
                Label="Redo"
                Visibility="Collapsed" />
            <AppBarSeparator Visibility="Collapsed" />
            <AppBarButton
                Command="{x:Bind ViewModel.CopyCommand}"
                Icon="Copy"
                Label="Copy" />
            <AppBarButton
                Command="{x:Bind ViewModel.SaveCommand}"
                Icon="Save"
                IsEnabled="False"
                Label="Save"
                Visibility="Collapsed" />
            <AppBarButton
                Command="{x:Bind ViewModel.PrintCommand}"
                Icon="Print"
                IsEnabled="False"
                Label="Print"
                Visibility="Collapsed" />
        </CommandBar>

        <Grid
            x:Name="CanvasContainer"
            Background="{ThemeResource LayerOnMicaBaseAltFillColorDefault}"
            Row="1">
            <imagecanvas:ImageCanvas
                CanvasSize="{x:Bind ViewModel.ImageSize, Mode=OneWay}"
                Drawables="{x:Bind ViewModel.Drawables, Mode=OneWay}"
                IsCropModeEnabled="{x:Bind ViewModel.IsInCropMode, Mode=OneWay}"
                Orientation="{x:Bind ViewModel.Orientation, Mode=OneWay}" />
        </Grid>
    </Grid>
</local:ImageEditPageBase>
